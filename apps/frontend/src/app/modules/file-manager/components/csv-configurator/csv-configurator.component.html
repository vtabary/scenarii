<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  *ngIf="columns.length > 0; else noColumns"
>
  <div class="shadow sm:rounded-md sm:overflow-hidden">
    <div class="px-4 py-5 bg-white sm:p-6 space-y-6">
      <div>
        <h3 class="text-lg font-medium leading-6 text-gray-900">
          Select the matching field from your csv file
        </h3>
        <p class="text-sm text-gray-500 mt-1 italic">
          For each needed field, select a column name from your csv.
        </p>
      </div>

      <div class="mt-3">
        <!-- Identifier -->
        <scenarii-csv-configurator-field
          [control]="identifier"
          label="Identifier"
          fieldName="identifier"
          [columns]="columns"
          [form]="form"
          errorMessage="You must set a column name for the identifier."
        ></scenarii-csv-configurator-field>

        <!-- Message -->
        <scenarii-csv-configurator-field
          [control]="message"
          label="Message"
          fieldName="message"
          [columns]="columns"
          [form]="form"
          errorMessage="You must set a column name for the message."
        ></scenarii-csv-configurator-field>

        <!-- Category -->
        <scenarii-csv-configurator-field
          [control]="category"
          label="Category"
          fieldName="category"
          [columns]="columns"
          [form]="form"
        ></scenarii-csv-configurator-field>

        <!-- Subcategory -->
        <scenarii-csv-configurator-field
          [control]="subcategory"
          label="Subcategory"
          fieldName="subcategory"
          [columns]="columns"
          [form]="form"
        ></scenarii-csv-configurator-field>

        <!-- Dependency -->
        <scenarii-csv-configurator-field
          [control]="dependency"
          label="Denpendency"
          fieldName="dependency"
          [columns]="columns"
          [form]="form"
        ></scenarii-csv-configurator-field>

        <!-- Comment -->
        <scenarii-csv-configurator-field
          [control]="comment"
          label="Comment"
          fieldName="comment"
          [columns]="columns"
          [form]="form"
        ></scenarii-csv-configurator-field>
      </div>
    </div>
    <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
      <button
        type="submit"
        class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-200"
        [disabled]="!form.valid"
      >
        Save
      </button>
    </div>
  </div>
</form>

<ng-template #noColumns>
  <div class="shadow sm:rounded-md sm:overflow-hidden">
    <div class="px-4 py-5 bg-white sm:p-6 space-y-6">
      Your CSV file has no column. Please upload a CSV file with at least one
      column.
    </div>
    <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
      <button
        type="button"
        class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-200"
        (click)="onClear()"
      >
        Cancel
      </button>
    </div>
  </div>
</ng-template>
